services:
  paw:
    build: .
    container_name: paw
    ports:
      - "127.0.0.1:8000:8000"
    security_opt:
      - no-new-privileges:true
    cap_drop:
      - ALL
    volumes:
      - paw-data:/home/paw/data
      - paw-plugins:/home/paw/plugins
      - paw-workspace:/home/paw/workspace
    env_file:
      - .env
    environment:
      - PAW_LOG_FORMAT=console
      - PAW_DB_JOURNAL_MODE=WAL
      - OLLAMA_API_BASE=http://host.docker.internal:11434
    restart: unless-stopped

volumes:
  paw-data:
    name: paw-data
  paw-plugins:
    name: paw-plugins
  paw-workspace:
    name: paw-workspace
